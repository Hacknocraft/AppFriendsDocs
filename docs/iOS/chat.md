## Dialogs
There are three types of dialogs:

1. Private one on one dialog. This is a conversation between two users. You can't add more users to private one on one dialog. This type of dialog is only visible to the two users.
2. Private group dialog. This is a conversation between multiple users. You can add up to 200 users to a private group chat. This type of dialog is only visible to users in the group.
3. Open channel dialog. This is an open conversation. It is visible to everyone. Each user can only be in one channel at a time.

### Create a dialog
Users can create private dialogs in your app.

### Mute a dialog
Muting a dialog means you will no longer receive any Apple push notification and badge update from new messages sent to this dialog. You can mute a dialog by:
``` swift
DialogsManager.sharedInstance.muteDialog(_dialogID!, muted: toggle.on)
{ [weak self] (error) in
    if error == nil {
      // success
    }
    else {
      // failed
    }
}
```

## Messages
Messages can be generated by the users in chats, or they can be from AppFriends platform to deliver special events. If you use `AppFriendsUI` framework, the messages are stored using `CoreData`. The special messages are also processed for you.

### Typing Indicators
When someone is typing, the typing indicator can be displayed on the chat view. This feature is provided in the `AppFriendsUI` chat view, so you don't have to make any more effort

![Alt text](http://res.cloudinary.com/hacknocraft-appfriends/image/upload/c_scale,w_200/v1473730653/Simulator_Screen_Shot_Sep_12_2016_5.28.26_PM_uetywi.png "Search User Example")

#### Start typing
If you wish to manually trigger typing event, you can do it by:
```
DialogsManager.sharedInstance.startTyping(_dialogID, dialogType: _dialogType)
```

#### End typing
```
DialogsManager.sharedInstance.endTyping(_dialogID, dialogType: _dialogType)
```

#### Typing indicator event
To react to typing event, you need to implement `MessagingManagerDelegate`
```
optional func didUpdateTypingStatus(dialogID: String, userName: String, typing: Bool)
```

### Message Receipts
The sender of a message can request the receivers of the message for receipts. There are two types of receipts:

1. receive receipt, it means the message is received by the receiver's app
2. read receipt, it means the message is read by the receiver

You can also find out which users have received/read the message by using a REST call to AppFriends platform.

#### Request for receipt
When you send a message, set the require receipt parameter to `true` and it indicates that you want to record receipts for this message.
```
MessagingManager.sharedInstance.sendTextMessage(text, dialogID: _dialogID, dialogType: _dialogType, requireReceipt: true, completion: { (success, error) in

})
```

#### Receipt update events
To react to receipt update events, you need to implement `MessagingManagerDelegate`
```
optional func didUpdateMessageReceiptStatus(dialogID: String, messageID: String, status: MessageReceiptStatus)
```
The receipt status can be `Received` or `Read`

#### Check receipts status of a message
You can use a REST api call to check who have received/read your message by:
```
GET /messages/:temp_id/receipts
```
Sample response:
```
{
"user_id": "09351dec3a3ac737cdaa7847d3b34b9e"
"status": "read"   // user has read the message
"date": 1474908163090
},
{
"user_id": "58ac7103b3fcf6aa513c7fbf629df03c"
"status": "received" // user has received the message
"date": 1474908261634
}
```
#### Send receipts
Receipts are sent automatically if you use `AppFriendsUI` chat view. If you want to manually send receipts, you can use:
```
MessagingManager.sharedInstance.postMessageReceipt(tempID: tempID, dialogID: dialogID, senderID: senderID, receiptStatus: .Read)
```
